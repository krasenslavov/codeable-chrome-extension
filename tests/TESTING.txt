TESTING GUIDE FOR CODEABLE NOTIFICATIONS EXTENSION
==================================================

INSTALLATION STEPS
------------------

1. Open Chrome browser
2. Navigate to: chrome://extensions/
3. Enable "Developer mode" (toggle in top-right corner)
4. Click "Load unpacked" button
5. Select the folder: C:\Users\krasenslavov\Desktop\WORKPLACE\GitHub\codeable-chrome-extension
6. The extension should now appear in your extensions list

Note: You may see an error about missing icon files. You can either:
   - Create placeholder icon files (icon16.png, icon32.png, icon96.png)
   - Or remove the "icons" section from manifest.json (lines 28-32)


HOW TO DEBUG THE EXTENSION
---------------------------

The extension has THREE different console logs you need to check:

1. CODEABLE.IO TAB CONSOLE (codeable-monitor.js)
   - Open https://app.codeable.io/
   - Press F12 to open DevTools
   - Go to Console tab
   - Look for messages starting with "[Codeable Monitor]"
   - This shows: widget detection, notification counting, badge updates

2. OTHER TABS CONSOLE (notification-display.js)
   - Open any other website (e.g., google.com)
   - Press F12 to open DevTools
   - Go to Console tab
   - Look for messages starting with "[Notification Display]"
   - This shows: when notifications are received and displayed

3. BACKGROUND SERVICE WORKER CONSOLE (background.js)
   - Go to chrome://extensions/
   - Find "Codeable Notifications" extension
   - Click "service worker" link (blue text)
   - This opens a separate console window
   - Look for messages starting with "[Background]"
   - This shows: message routing, badge updates, tab broadcasting


TESTING THE EXTENSION
----------------------

Test 1: Check if Extension Loads on Codeable.io
------------------------------------------------
1. Open https://app.codeable.io/
2. Open DevTools (F12) and check Console
3. You should see: "[Codeable Monitor] Extension loaded and monitoring started"
4. Every 3 seconds you should see: "[Codeable Monitor] Checking for notifications..."

If you DON'T see these messages:
- Check chrome://extensions/ to verify the extension is enabled
- Click the "Reload" button on the extension
- Refresh the codeable.io page


Test 2: Verify Widget Detection
--------------------------------
1. In the codeable.io console, look for:
   "[Codeable Monitor] Found X widgets"
2. It should find 3 widgets (new-projects, in-progress, pending)

If it shows "Found 0 widgets":
- The page hasn't fully loaded yet
- The DOM structure might be different
- Open DevTools Elements tab and search for: cdbl-notifications-widget
- Verify the category attributes match: "new-projects", "in-progress", "pending"


Test 3: Check Notification Indicator Visibility
------------------------------------------------
1. In console, look for messages like:
   "[Codeable Monitor] new-projects indicator visible: true/false"
2. This tells you if the extension can detect notifications

To manually test:
- In Elements tab, find: span.notifications-indicator
- Check its computed style (display property)
- If display: none = no notifications detected
- If display: block or flex = notifications detected


Test 4: Simulate Notifications (Manual DOM Changes)
----------------------------------------------------
NOTE: Changing elements in DevTools F12 won't trigger the extension because:
- The extension checks every 3 seconds on a timer
- It looks at the actual DOM, which you CAN change in DevTools
- BUT the extension needs the FULL structure to work

To properly test:
1. Wait for a REAL notification on codeable.io
2. Or ask for help modifying the actual page structure


Test 5: Check Badge Updates
----------------------------
1. When notifications are found, console shows:
   "[Codeable Monitor] Total unread count: X"
2. Look at the extension icon in Chrome toolbar
3. You should see a red badge with the number

To check background worker:
1. Go to chrome://extensions/
2. Click "service worker" under the extension
3. Look for: "[Background] Setting badge text to: X"


Test 6: Test Notification Display on Other Tabs
------------------------------------------------
1. Have codeable.io open with unread notifications
2. Open a new tab (e.g., google.com)
3. Open DevTools (F12) on that tab
4. When a NEW notification appears on codeable.io, you should see:
   - In Background console: "[Background] Broadcasting to X tabs"
   - In other tab console: "[Notification Display] Message received"
   - A notification popup in top-right corner


Test 7: Clear Notifications
----------------------------
1. On the codeable.io tab, click the extension icon in toolbar
2. Badge should disappear
3. All notification popups on other tabs should close


COMMON ISSUES AND SOLUTIONS
----------------------------

Issue: No console messages at all
Solution:
- Extension not loaded. Check chrome://extensions/
- Click "Reload" on the extension
- Refresh the page

Issue: "Found 0 widgets"
Solution:
- Page not fully loaded. Wait a few seconds.
- Check if you're on app.codeable.io (not just codeable.io)
- Verify DOM structure in Elements tab

Issue: "indicator visible: false" even with notifications
Solution:
- The span.notifications-indicator has display:none
- This is expected when there are NO unread notifications
- The class .notification--isRead marks notifications as read

Issue: Badge shows but no popup on other tabs
Solution:
- Check Background console for broadcast messages
- Check other tab console for received messages
- Verify the other tab has the content script loaded
- Try refreshing the other tab

Issue: Can't see Background console
Solution:
- Go to chrome://extensions/
- Find your extension
- Look for blue "service worker" text and click it
- If you don't see it, the service worker may not be running
- Click "Reload" on the extension


DEBUGGING WORKFLOW
------------------

When testing, follow this order:

1. Open chrome://extensions/ → Click "service worker" (keep this window open)
2. Open https://app.codeable.io/ → Open DevTools Console
3. Open another tab (google.com) → Open DevTools Console
4. Arrange windows so you can see all 3 consoles
5. Watch the logs flow through all three consoles
6. This shows you the complete message flow:
   Codeable Monitor → Background Worker → Notification Display


MANUAL DOM TESTING (Advanced)
------------------------------

To manually create a test notification in DevTools:

1. On codeable.io, open DevTools Console
2. Run this code to make an indicator visible:

   const indicator = document.querySelector('cdbl-notifications-widget[category="new-projects"] span.notifications-indicator');
   if(indicator) indicator.style.display = 'block';

3. Wait 3 seconds (next check cycle)
4. The extension will try to click the widget and open the popover
5. Watch the console for what happens next

Note: This won't work completely because clicking needs the actual popover structure to exist.
The extension expects to find .popover-content with real notification data inside.


NEED HELP?
----------

If you're stuck:
1. Copy ALL console messages from all three consoles
2. Note what you were testing when the issue occurred
3. Share the console logs for debugging

The console logs will show exactly where the process is failing.
